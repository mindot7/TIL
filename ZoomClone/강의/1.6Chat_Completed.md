## ì±„íŒ…

### htmlì„ ë§Œë“¤ì–´ë³´ìì•„ì•„

`home.pug` ì™€ `app.js ì—ì„œ` ìˆ˜ì •í•´ì£¼ê¸°

```pug
//home.pug

main
            ul
            form
                input(type="text", placeholder="write a msg", required)
                button Send
```

```js
// app.js

const messageList = document.querySelector("ul")
const messageForm = document.querySelector("form")
...

...

function handleSubmit(event){
    event.preventDefault()
    const input = messageForm.querySelector("input")
    // í”„ë¡ íŠ¸ì—ì„œ ë°±ìœ¼ë¡œ ë³´ë‚´ì£¼ê¸°
    socket.send(input.value)
    // ì…ë ¥ì´ ëë‚˜ë©´ ë¹„ì›Œì£¼ê¸°
    input.value = ""
}

messageForm.addEventListener("submit", handleSubmit)
```





### backì—ì„œë„ ë³´ë‚´ë³´ì

```js
// server.js

...

wss.on("connection", (socket) => {
    console.log("Connected to Browser ğŸ‘")
    socket.on("close", () => console.log("Disconnected from Browser ğŸ˜¢"))
    socket.on("message", (message) => {
        socket.send(message)
    })
})

...
```

`const sockets = []`

ëˆ„êµ°ê°€ ìš°ë¦¬ ì„œë²„ì— ì—°ê²°í•˜ë©´ ("connection"), ê·¸ connectionì„ []ì•ˆì— ë„£ì



ê·¸ëŸ¬ë‹ˆê¹Œ,

```js
const sockets = []

wss.on("connection", (socket) => {
    sockets.push(socket)
```

- socketì„ array([])ì— ë„£ì–´ì¤„ ê²ƒì´ë¼ëŠ” ë§





`socket.on("message", (message) => {sockets.forEach(aSocket => aSocket.send(message))})`

